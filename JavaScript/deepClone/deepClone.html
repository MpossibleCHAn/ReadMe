<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>deepClone</title>
  </head>
  <body>

  </body>
  <script type="text/javascript">

  // 例(深复制)：
  var obj1 = {
    name:'chan',
    age:24,
    lang:[
      'chinese',
      'english'
    ],
    edu:true,
    clone:function () {
      console.log('clone');
    }
  }
  var deepObj = deepClone(obj1);
  console.log(deepObj);
  deepObj.name = 'hai';
  console.log(obj1.name);      // hai
  deepObj.lang[0] = 'test';
  console.log(obj1.lang[0]);   //  chinese


  // 深复制
  function deepClone(obj, temp) {
    // 定义temp
    var temp = temp || {};
    // 遍历对象
    for ( var i in obj ) {
      // 判断对象属性是否是object（objec，Array）
      if ( typeof obj[i] === 'object' ) {
        // 对象属性的构造函数是否是Array
        temp[i] = ( obj[i].constructor === Array ) ? [] : {};
        // 递归
        deepClone(obj[i], temp[i]);
      } else {
        temp[i] = obj[i];　　　
      }　　　　
    }　　
    return temp;　　
  }


  // 例(浅复制):
  var obj2 = {
    name:'chan',
    age:24,
    lang:[
      'chinese',
      'english'
    ],
    edu:true,
    clone:function () {
      console.log('clone');
    }
  };
  var shallowObj = shallowClone(obj2);
  console.log(shallowObj);
  shallowObj.name = 'hai';
  console.log(obj2.name);
  shallowObj.lang[0] = 'test';
  console.log(obj2.lang[0]);   //  test

  // 浅复制
  function shallowClone(src) {
    var dst = {};
    for (var prop in src) {
      if (src.hasOwnProperty(prop)) {
        dst[prop] = src[prop];
      }
    }
    return dst;
  }

  </script>
</html>
